(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[824],{8068:function(e,t,a){"use strict";var r=a(5893),s=a(5432),n=a.n(s);t.Z=e=>{let{value:t,type:a,handler:s,disabled:i,addClass:c}=e;return(0,r.jsx)("button",{className:"".concat(n().button," ").concat(c||""),onClick:s,type:a,disabled:i,children:t})}},4824:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ey}});var r,s,n,i,c=a(5893),l=a(9250),o=a(1248);let d=()=>(0,o.I0)(),h=o.v9;var u=a(1664),p=a.n(u),m=a(848),_=a(5673);(r=n||(n={}))[r.Five=5]="Five",r[r.Ten=10]="Ten",r[r.TwentyFive=25]="TwentyFive",r[r.Forty=40]="Forty",(s=i||(i={})).index="/",s.list="/list",s.id=":id",s.page="page/",s.pagePage="page/:page",s.details="details/:id",s.all="*",s.basename="/react-components";let x=(0,m.LC)({baseQuery:(0,_.ni)({baseUrl:"https://swapi.dev/api/people"}),endpoints:e=>({itemsList:e.query({async queryFn(e,t,a,r){let{data:{count:s}}=await r("");if(0===s)return{data:[]};let i=Math.ceil(s/n.Ten),c=await Promise.all([...Array(i).keys()].map(async e=>{let{data:t}=await r("?page=".concat(e+1));return t.results}));return{data:c.flat()}}}),itemDetail:e.query({query:e=>({url:"/".concat(e)})})})}),{useItemsListQuery:g,useItemDetailQuery:j}=x,{itemsList:y,itemDetail:v}=x.endpoints;var f=a(5300),C=a.n(f),N=a(1163),I=a(5675),S=a.n(I);let b=e=>{let{name:t,url:a,eye_color:r,birth_year:s,gender:n}=e,i=a.split("/");i.pop();let l=i[i.length-1],o=(0,N.useRouter)(),{page:d}=o.query;return(0,c.jsxs)("article",{className:C().itemCard,"data-testid":C().itemsCard,children:[(0,c.jsx)(p(),{href:d?"/page/".concat(d,"/details/").concat(l):"/details/".concat(l),children:(0,c.jsx)("button",{className:C().articleBtn,"data-testid":"detailsBtn",children:"Details"})}),(0,c.jsx)(S(),{src:"".concat("https://starwars-visualguide.com/assets/img/characters","/").concat(l,".jpg"),alt:"Photo of "+t,className:C().itemImage,width:150,height:150,priority:!0}),(0,c.jsx)("h2",{"data-testid":"name",children:t}),(0,c.jsxs)("p",{"data-testid":"eye_color",children:[(0,c.jsx)("strong",{children:"Eye color: "}),r]}),(0,c.jsxs)("p",{"data-testid":"gender",children:[(0,c.jsx)("strong",{children:"Gender: "}),n]}),(0,c.jsxs)("p",{"data-testid":"birth_year",children:[(0,c.jsx)("strong",{children:"Birth year: "}),s]})]})};var w=a(8046),F=a.n(w),P=()=>(0,c.jsx)("div",{className:F().loadingSpinner,"data-testid":"loading"});let T=(e,t)=>e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())),B=(e,t)=>{let a=e.length,r=Array.from({length:Math.ceil(a/t)},(e,t)=>t+1);return r},E=(e,t,a)=>{let r=e.length,s=(t-1)*a,n=a*t;return e=n>r?e.slice(s):e.slice(s,n)};var D=a(1317),q=a.n(D),L=a(7294),Q=a(1876);let R={searchQuery:window.localStorage.getItem("searchQuery")||"",data:[],dataAll:[],isFetching:!0,isError:!1,totalCount:0,totalPages:0,itemsPerPage:n.Ten,currentPage:1,searchedItems:[]},k=(0,Q.oM)({name:"items",initialState:R,reducers:{setAllData:(e,t)=>{e.dataAll=t.payload,e.isFetching=!1},setData:(e,t)=>{e.data=t.payload,e.isFetching=!1},setError:e=>{e.isError=!0,e.isFetching=!1},setTotalCount:(e,t)=>{e.totalCount=t.payload},setTotalPages:(e,t)=>{e.totalPages=t.payload},setItemsPerPage:(e,t)=>{e.itemsPerPage=t.payload},setSearchQuery:(e,t)=>{e.searchQuery=t.payload},setCurrentPage:(e,t)=>{e.currentPage=t.payload},setSearchedItems:(e,t)=>{e.searchedItems=t.payload}}}),{setAllData:M,setData:A,setError:Z,setTotalCount:W,setTotalPages:G,setItemsPerPage:K,setSearchQuery:U,setCurrentPage:V}=k.actions;var O=k.reducer,z=a(3387),J=a.n(z),H=()=>{let e=d(),t=(0,N.useRouter)(),{page:a}=t.query;(0,L.useEffect)(()=>{r()},[e]);let r=()=>{e(A([]))},{data:s,isFetching:n,isError:i}=j(Number(t.query.id));return(0,c.jsx)("div",{className:J().details,children:n&&!i?(0,c.jsx)(P,{}):s?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(p(),{href:a?"/page/".concat(a):"/",className:J().closeBtn,"data-testid":"closeBtn"}),(0,c.jsxs)("article",{className:J().detailsCard,"data-testid":"item-card",children:[(0,c.jsx)("h2",{"data-testid":"name",children:s.name}),(0,c.jsxs)("p",{"data-testid":"eye_color",children:[(0,c.jsx)("strong",{children:"Eye color: "}),s.eye_color]}),(0,c.jsxs)("p",{"data-testid":"gender",children:[(0,c.jsx)("strong",{children:"Gender: "}),s.gender]}),(0,c.jsxs)("p",{"data-testid":"birth_year",children:[(0,c.jsx)("strong",{children:"Birth year: "}),s.birth_year]})]})]}):""})},X=()=>{let{data:e=[],isFetching:t,isError:a}=g(),r=(0,N.useRouter)(),s=r.query.page,n=r.query.id,{searchQuery:i,itemsPerPage:l}=h(e=>e.items),o=T(e,i);return o=E(o,Number(s)||1,l),(0,c.jsx)("div",{className:q().itemsContainer,"data-testid":q().itemsContainer,children:t||a?(0,c.jsx)(P,{}):(0,c.jsxs)(c.Fragment,{children:[(null==o?void 0:o.length)===0?(0,c.jsx)("div",{children:"No items found."}):null==o?void 0:o.map(e=>(0,c.jsx)(b,{...e},e.url)),n?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(H,{}),(0,c.jsx)(p(),{id:"overlay",href:"/"})]}):""]})})},Y=a(151),$=a.n(Y),ee=()=>{let e=d(),{itemsPerPage:t,totalPages:a,searchQuery:r}=h(e=>e.items),{data:s=[]}=g();s=T(s,r);let i=B(s,t);return(0,c.jsx)("nav",{className:$().pagination,children:(0,c.jsxs)("ul",{children:[(0,c.jsxs)("select",{onChange:function(t){let r=Number(t.target.value);e(K(Number(r))),e(G(Number(a)))},defaultValue:n.Ten,className:$().select,children:[(0,c.jsx)("option",{value:n.Five,children:n.Five}),n.Five,(0,c.jsx)("option",{value:n.Ten,children:n.Ten}),(0,c.jsx)("option",{value:n.TwentyFive,children:n.TwentyFive}),(0,c.jsx)("option",{value:n.Forty,children:n.Forty})]}),i.map((e,t)=>(0,c.jsx)(p(),{className:$().paginationItem,href:"/page/".concat(e),children:e},t))]})})},et=a(4080),ea=a.n(et),er=a(9583),es=a(8068),en=()=>{let e=d(),{push:t}=(0,N.useRouter)(),[a,r]=(0,L.useState)(""),s=h(e=>e.items.searchQuery||"");(0,L.useEffect)(()=>{n()},[e]);let n=()=>{e(Z())};return(0,c.jsxs)("section",{className:ea().searchContainer,children:[(0,c.jsx)("h1",{children:"React Search"}),(0,c.jsxs)("form",{onSubmit:r=>{r.preventDefault(),t("/page"),a?(localStorage.setItem("searchQuery",a.trim()),e(U(a))):e(U(""))},children:[(0,c.jsxs)("div",{className:ea().searchIconWrapper,children:[(0,c.jsx)(er.Ozl,{className:ea().searchIcon}),(0,c.jsx)("input",{placeholder:"Search...",name:"search",type:"search",className:ea().searchInput,"aria-label":"search",defaultValue:s,onChange:e=>r(e.target.value)})]}),(0,c.jsx)(es.Z,{type:"submit",addClass:ea().searchBtn,value:"Search"})]})]})},ei=a(2737),ec=a.n(ei),el=e=>{let{children:t}=e;return(0,c.jsx)("div",{className:ec().wrapper,children:t})},eo=a(2729),ed=a.n(eo),eh=()=>{let e=d();return(0,c.jsx)("div",{id:"sidebar",children:(0,c.jsx)(el,{children:(0,c.jsxs)("div",{className:ed().container,children:[(0,c.jsxs)("section",{className:ed().rightSection,children:[(0,c.jsx)(en,{}),(0,c.jsx)(es.Z,{type:"submit",addClass:ed().searchBtn,value:"Error!",handler:function(){e(Z())}}),(0,c.jsx)(ee,{}),(0,c.jsx)(X,{})]}),(0,c.jsx)("section",{className:ed().leftSection,children:(0,c.jsx)(l.j3,{})})]})})})},eu=a(8858);let ep=(0,Q.xC)({reducer:{items:O,[x.reducerPath]:x.reducer},middleware:e=>e().concat(x.middleware)});(0,eu.KV)(()=>ep);class em extends L.Component{componentDidCatch(e,t){console.error("ErrorBoundary caught an error: ",e,t),this.setState({isError:!0,errorMessage:e.message})}render(){return this.state.isError?(0,c.jsxs)("div",{style:{padding:"2rem"},children:[(0,c.jsx)("h1",{children:"Something went wrong."}),(0,c.jsx)("p",{children:this.state.errorMessage}),(0,c.jsx)("p",{children:"Reload the page."})]}):this.props.children}constructor(e){super(e),this.state={isError:!1,errorMessage:""}}}var e_=a(9185),ex=a.n(e_);let eg=()=>(0,c.jsx)("header",{children:(0,c.jsx)("nav",{children:(0,c.jsx)(p(),{href:"/","aria-label":"Go to home",className:ex().header,children:"Home"})})});function ej(e){let{children:t}=e;return(0,c.jsx)(o.zt,{store:ep,children:(0,c.jsxs)(em,{children:[(0,c.jsx)(eg,{}),t]})})}function ey(){return(0,c.jsx)(ej,{children:(0,c.jsx)(eh,{})})}},5432:function(e){e.exports={button:"Button_button__exqP_"}},3387:function(e){e.exports={details:"Details_details___T7cb",detailsCard:"Details_detailsCard__W0GuU",closeBtn:"Details_closeBtn__y0U5e"}},5300:function(e){e.exports={itemCard:"Item_itemCard__TRLvA",itemImage:"Item_itemImage__UdaqQ",articleBtn:"Item_articleBtn__1QN_V"}},1317:function(e){e.exports={overlay:"ListItems_overlay__u1Tnp",itemsContainer:"ListItems_itemsContainer__vCbcS"}},8046:function(e){e.exports={loadingSpinner:"Loading_loadingSpinner__iZ_TA",spinner:"Loading_spinner__nyZZa"}},9185:function(e){e.exports={header:"Navbar_header__heI4K"}},151:function(e){e.exports={pagination:"Pagination_pagination__c7olK",select:"Pagination_select__u_OEq",paginationItem:"Pagination_paginationItem___M0MX",active:"Pagination_active__xC1TQ"}},2729:function(e){e.exports={container:"Root_container__9wNDo",rightSection:"Root_rightSection__DkY2I",leftSection:"Root_leftSection__0JjhC"}},4080:function(e){e.exports={searchInput:"SearchSection_searchInput__ZfJKC",searchBtn:"SearchSection_searchBtn__ckfyn",searchIconWrapper:"SearchSection_searchIconWrapper__tcDDC",searchIcon:"SearchSection_searchIcon__2yx_d"}},2737:function(e){e.exports={wrapper:"Wrapper_wrapper___E3LO"}}}]);