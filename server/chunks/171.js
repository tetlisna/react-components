exports.id=171,exports.ids=[171],exports.modules={6201:e=>{e.exports={button:"Button_button__exqP_"}},8322:e=>{e.exports={details:"Details_details___T7cb",detailsCard:"Details_detailsCard__W0GuU",closeBtn:"Details_closeBtn__y0U5e"}},8873:e=>{e.exports={itemCard:"Item_itemCard__TRLvA",itemImage:"Item_itemImage__UdaqQ",articleBtn:"Item_articleBtn__1QN_V"}},9973:e=>{e.exports={overlay:"ListItems_overlay__u1Tnp",itemsContainer:"ListItems_itemsContainer__vCbcS"}},4514:e=>{e.exports={loadingSpinner:"Loading_loadingSpinner__iZ_TA",spinner:"Loading_spinner__nyZZa"}},9531:e=>{e.exports={header:"Navbar_header__heI4K"}},600:e=>{e.exports={pagination:"Pagination_pagination__c7olK",select:"Pagination_select__u_OEq",paginationItem:"Pagination_paginationItem___M0MX",active:"Pagination_active__xC1TQ"}},6464:e=>{e.exports={container:"Root_container__9wNDo",rightSection:"Root_rightSection__DkY2I",leftSection:"Root_leftSection__0JjhC"}},6343:e=>{e.exports={searchInput:"SearchSection_searchInput__ZfJKC",searchBtn:"SearchSection_searchBtn__ckfyn",searchIconWrapper:"SearchSection_searchIconWrapper__tcDDC",searchIcon:"SearchSection_searchIcon__2yx_d"}},2945:e=>{e.exports={wrapper:"Wrapper_wrapper___E3LO"}},8161:(e,t,a)=>{"use strict";a.d(t,{K$:()=>h,ZP:()=>m,a_:()=>c,n6:()=>u,ql:()=>p,sT:()=>o});var r=a(5184),s=a(2554);let i={searchQuery:"",data:[],dataAll:[],isFetching:!0,isError:!1,totalCount:0,totalPages:0,itemsPerPage:s.gK.Ten,currentPage:1,searchedItems:[]},n=(0,r.createSlice)({name:"items",initialState:i,reducers:{setAllData:(e,t)=>{e.dataAll=t.payload,e.isFetching=!1},setData:(e,t)=>{e.data=t.payload,e.isFetching=!1},setError:e=>{e.isError=!0,e.isFetching=!1},setTotalCount:(e,t)=>{e.totalCount=t.payload},setTotalPages:(e,t)=>{e.totalPages=t.payload},setItemsPerPage:(e,t)=>{e.itemsPerPage=t.payload},setSearchQuery:(e,t)=>{e.searchQuery=t.payload},setCurrentPage:(e,t)=>{e.currentPage=t.payload},setSearchedItems:(e,t)=>{e.searchedItems=t.payload}}}),{setAllData:l,setData:c,setError:o,setTotalCount:d,setTotalPages:h,setItemsPerPage:u,setSearchQuery:p,setCurrentPage:g}=n.actions,m=n.reducer},9575:(e,t,a)=>{"use strict";a.d(t,{Y:()=>c,h:()=>l});var r=a(5184),s=a(4562),i=a(8161),n=a(5648);let l=(0,r.configureStore)({reducer:{items:i.ZP,[s.hi.reducerPath]:s.hi.reducer},middleware:e=>e().concat(s.hi.middleware)}),c=(0,n.createWrapper)(()=>l)},8068:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(997),s=a(6201),i=a.n(s);let n=({value:e,type:t,handler:a,disabled:s,addClass:n})=>r.jsx("button",{className:`${i().button} ${n||""}`,onClick:a,type:t,disabled:s,children:e})},2554:(e,t,a)=>{"use strict";var r,s;a.d(t,{gK:()=>r,pD:()=>n,yA:()=>i});let i="https://starwars-visualguide.com/assets/img/characters",n="https://swapi.dev/api/people";(function(e){e[e.Five=5]="Five",e[e.Ten=10]="Ten",e[e.TwentyFive=25]="TwentyFive",e[e.Forty=40]="Forty"})(r||(r={})),function(e){e.index="/",e.list="/list",e.id=":id",e.page="page/",e.pagePage="page/:page",e.details="details/:id",e.all="*",e.basename="/react-components"}(s||(s={}))},4807:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(997);function s({Component:e,pageProps:t}){let a=e.getLayout??(e=>e);return a(r.jsx(e,{...t}))}a(108)},3615:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>z});var r=a(997),s=a(4661),i=a(7661);let n=()=>(0,i.useDispatch)(),l=i.useSelector;var c=a(1664),o=a.n(c),d=a(4562),h=a(2554),u=a(8873),p=a.n(u),g=a(1163),m=a(5675),x=a.n(m);let _=e=>{let{name:t,url:a,eye_color:s,birth_year:i,gender:n}=e,l=a.split("/");l.pop();let c=l[l.length-1],d=(0,g.useRouter)(),{page:u}=d.query;return(0,r.jsxs)("article",{className:p().itemCard,"data-testid":p().itemsCard,children:[r.jsx(o(),{href:u?`/page/${u}/details/${c}`:`/details/${c}`,children:r.jsx("button",{className:p().articleBtn,"data-testid":"detailsBtn",children:"Details"})}),r.jsx(x(),{src:`${h.yA}/${c}.jpg`,alt:"Photo of "+t,className:p().itemImage,width:150,height:150,priority:!0}),r.jsx("h2",{"data-testid":"name",children:t}),(0,r.jsxs)("p",{"data-testid":"eye_color",children:[r.jsx("strong",{children:"Eye color: "}),s]}),(0,r.jsxs)("p",{"data-testid":"gender",children:[r.jsx("strong",{children:"Gender: "}),n]}),(0,r.jsxs)("p",{"data-testid":"birth_year",children:[r.jsx("strong",{children:"Birth year: "}),i]})]})};var j=a(4514),y=a.n(j);let v=()=>r.jsx("div",{className:y().loadingSpinner,"data-testid":"loading"}),f=(e,t)=>e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())),S=(e,t)=>{let a=e.length,r=Array.from({length:Math.ceil(a/t)},(e,t)=>t+1);return r},C=(e,t,a)=>{let r=e.length,s=(t-1)*a,i=a*t;return e=i>r?e.slice(s):e.slice(s,i)};var N=a(9973),I=a.n(N),b=a(6689),P=a(8161),F=a(8322),T=a.n(F);let w=()=>{let e=n(),t=(0,g.useRouter)(),{page:a}=t.query;(0,b.useEffect)(()=>{s()},[e]);let s=()=>{e((0,P.a_)([]))},{data:i,isFetching:l,isError:c}=(0,d.o3)(Number(t.query.id));return r.jsx("div",{className:T().details,children:l&&!c?r.jsx(v,{}):i?(0,r.jsxs)(r.Fragment,{children:[r.jsx(o(),{href:a?`/page/${a}`:"/",className:T().closeBtn,"data-testid":"closeBtn"}),(0,r.jsxs)("article",{className:T().detailsCard,"data-testid":"item-card",children:[r.jsx("h2",{"data-testid":"name",children:i.name}),(0,r.jsxs)("p",{"data-testid":"eye_color",children:[r.jsx("strong",{children:"Eye color: "}),i.eye_color]}),(0,r.jsxs)("p",{"data-testid":"gender",children:[r.jsx("strong",{children:"Gender: "}),i.gender]}),(0,r.jsxs)("p",{"data-testid":"birth_year",children:[r.jsx("strong",{children:"Birth year: "}),i.birth_year]})]})]}):""})},K=()=>{let{data:e=[],isFetching:t,isError:a}=(0,d.tg)(),s=(0,g.useRouter)(),i=s.query.page,n=s.query.id,{searchQuery:c,itemsPerPage:h}=l(e=>e.items),u=f(e,c);return u=C(u,Number(i)||1,h),r.jsx("div",{className:I().itemsContainer,"data-testid":I().itemsContainer,children:t||a?r.jsx(v,{}):(0,r.jsxs)(r.Fragment,{children:[u?.length===0?r.jsx("div",{children:"No items found."}):u?.map(e=>r.jsx(_,{...e},e.url)),n?(0,r.jsxs)(r.Fragment,{children:[r.jsx(w,{}),r.jsx(o(),{id:"overlay",href:"/"})]}):""]})})};var B=a(600),D=a.n(B);let q=()=>{let e=n(),{itemsPerPage:t,totalPages:a,searchQuery:s}=l(e=>e.items),{data:i=[]}=(0,d.tg)();i=f(i,s);let c=S(i,t);return r.jsx("nav",{className:D().pagination,children:(0,r.jsxs)("ul",{children:[(0,r.jsxs)("select",{onChange:function(t){let r=Number(t.target.value);e((0,P.n6)(Number(r))),e((0,P.K$)(Number(a)))},defaultValue:h.gK.Ten,className:D().select,children:[r.jsx("option",{value:h.gK.Five,children:h.gK.Five}),h.gK.Five,r.jsx("option",{value:h.gK.Ten,children:h.gK.Ten}),r.jsx("option",{value:h.gK.TwentyFive,children:h.gK.TwentyFive}),r.jsx("option",{value:h.gK.Forty,children:h.gK.Forty})]}),c.map((e,t)=>r.jsx(o(),{className:D().paginationItem,href:`/page/${e}`,children:e},t))]})})};var E=a(6343),$=a.n(E),A=a(9583),L=a(8068);let Q=()=>{let e=n(),{push:t}=(0,g.useRouter)(),[a,s]=(0,b.useState)(""),i=l(e=>e.items.searchQuery||"");(0,b.useEffect)(()=>{c()},[e]);let c=()=>{e((0,P.sT)())};return(0,r.jsxs)("section",{className:$().searchContainer,children:[r.jsx("h1",{children:"React Search"}),(0,r.jsxs)("form",{onSubmit:r=>{r.preventDefault(),t("/page"),a?(localStorage.setItem("searchQuery",a.trim()),e((0,P.ql)(a))):e((0,P.ql)(""))},children:[(0,r.jsxs)("div",{className:$().searchIconWrapper,children:[r.jsx(A.Ozl,{className:$().searchIcon}),r.jsx("input",{placeholder:"Search...",name:"search",type:"search",className:$().searchInput,"aria-label":"search",defaultValue:i,onChange:e=>s(e.target.value)})]}),r.jsx(L.Z,{type:"submit",addClass:$().searchBtn,value:"Search"})]})]})};var R=a(2945),Z=a.n(R);let M=({children:e})=>r.jsx("div",{className:Z().wrapper,children:e});var W=a(6464),k=a.n(W);let G=()=>{let e=n();return r.jsx("div",{id:"sidebar",children:r.jsx(M,{children:(0,r.jsxs)("div",{className:k().container,children:[(0,r.jsxs)("section",{className:k().rightSection,children:[r.jsx(Q,{}),r.jsx(L.Z,{type:"submit",addClass:k().searchBtn,value:"Error!",handler:function(){e((0,P.sT)())}}),r.jsx(q,{}),r.jsx(K,{})]}),r.jsx("section",{className:k().leftSection,children:r.jsx(s.Outlet,{})})]})})})};var O=a(9575);class U extends b.Component{constructor(e){super(e),this.state={isError:!1,errorMessage:""}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error: ",e,t),this.setState({isError:!0,errorMessage:e.message})}render(){return this.state.isError?(0,r.jsxs)("div",{style:{padding:"2rem"},children:[r.jsx("h1",{children:"Something went wrong."}),r.jsx("p",{children:this.state.errorMessage}),r.jsx("p",{children:"Reload the page."})]}):this.props.children}}var V=a(9531),J=a.n(V);let X=()=>r.jsx("header",{children:r.jsx("nav",{children:r.jsx(o(),{href:"/","aria-label":"Go to home",className:J().header,children:"Home"})})});function Y({children:e}){return r.jsx(i.Provider,{store:O.h,children:(0,r.jsxs)(U,{children:[r.jsx(X,{}),e]})})}function z(){return r.jsx(Y,{children:r.jsx(G,{})})}},4562:(e,t,a)=>{"use strict";a.d(t,{Xt:()=>o,hi:()=>i,o3:()=>l,tg:()=>n});var r=a(4335),s=a(2554);let i=(0,r.createApi)({baseQuery:(0,r.fetchBaseQuery)({baseUrl:s.pD}),endpoints:e=>({itemsList:e.query({async queryFn(e,t,a,r){let{data:{count:i}}=await r("");if(0===i)return{data:[]};let n=Math.ceil(i/s.gK.Ten),l=await Promise.all([...Array(n).keys()].map(async e=>{let{data:t}=await r(`?page=${e+1}`);return t.results}));return{data:l.flat()}}}),itemDetail:e.query({query:e=>({url:`/${e}`})})})}),{useItemsListQuery:n,useItemDetailQuery:l}=i,{itemsList:c,itemDetail:o}=i.endpoints},108:()=>{}};